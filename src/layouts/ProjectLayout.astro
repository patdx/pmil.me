---
import Container from '../components/Container.astro';
import App from './App.astro';
import humanizeUrl from 'humanize-url';
import CoverImage from '../components/CoverImage.astro';
import type { MarkdownLayoutProps } from 'astro';

type Props = MarkdownLayoutProps<{
  title: string;
  coverImage?: string | undefined;
  date: string;
  excerpt: string;
  author: string;

  externalUrl: string;
  technologies?: string;
}>;

const {
  frontmatter: { title, coverImage, externalUrl, technologies },
  url,
} = Astro.props;
---

<App>
  <Container class="grid gap-4 py-4">
    <article class="mb-32">
      {
        /* <NextSeo
        title={`${post.title} | Patrick Miller`}
        openGraph={{
          images: post.ogImage ? [{ url: post.ogImage.url }] : [],
        }}
      /> */
      }
      <h1
        class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left"
      >
        {title}
      </h1>

      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
        <div class="col-span-2 grid gap-4 content-start">
          <div class="prose"><slot /></div>
          {
            Boolean(externalUrl) && (
              <p>
                <a
                  href={externalUrl}
                  class="inline-block rounded-lg bg-green-600 py-2 px-6 font-bold text-white hover:bg-green-700"
                  target="_blank"
                >
                  View Project ({humanizeUrl(externalUrl)})
                </a>
              </p>
            )
          }
        </div>
        <div class="col-span-1 grid gap-4 grid-cols-1 content-start">
          {
            coverImage ? (
              <CoverImage title={title} src={coverImage} href={url} />
            ) : undefined
          }
          {Boolean(technologies) && <p>{technologies}</p>}
        </div>
      </div>
    </article>
  </Container>
</App>
